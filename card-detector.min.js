/*
 plugin for detecting credit card brand
 it will automatically detect credit card number when user typing
 or even paste number rom somewhere
 it will show card brand to a specific html element(e.g div, span)

 author: awlad(awladliton@gmail.com)

 */
cards_pattern=[{pattern:/^(36|38|30[0-5])/,companyName:"Diners Club",companyShortname:"dinersclubintl"},{pattern:/^35/,companyName:"JCB",companyShortname:"jcb"},{pattern:/^3[47]/,companyName:"American Express",companyShortname:"amex"},{pattern:/^(6706|6771|6709)/,companyName:"Laser Card Services Ltd.",companyShortname:"laser"},{pattern:/^4/,companyName:"Visa",companyShortname:"visa"},{pattern:/^(62|88)/,companyName:"China UnionPay",companyShortname:"unionpay"},{pattern:/^5[1-5]/,companyName:"Mastercard",companyShortname:"mastercard"},{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,companyName:"Maestro (MasterCard)",companyShortname:"maestro"},{pattern:/^(6011|65|64[4-9]|622)/,companyName:"Discover",companyShortname:"discover"},{pattern:/^414720/,issuingAuthority:"Chase",issuerName:"Chase Sapphire Card"}],function(a){a.fn.cardDetector=function(b){var c=function(c){return card_name="unknown",a.each(cards_pattern,function(a,d){if(d.pattern.test(c))return card_name=d.companyName,b.html(card_name),!1}),card_name};a(this).keydown(function(){return!(this.length<4)&&c(a(this).val())}),a(this).bind("paste",function(a){var b=a.originalEvent.clipboardData.getData("text");return!(this.length<4)&&c(b)})}}(jQuery);